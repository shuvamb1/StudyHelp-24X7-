<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>StudyHelp 24x7</title>
	<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B31J01CXSV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B31J01CXSV');
</script>
</head>
<body bgcolor="#e4e4ed">
    <header style="font-family:Gagalin">
        <div id="logo">üåê STUDYHELP 24X7</div>
        
    </header>
    <div class="fg" style="font-family:Gagalin">
        <div class="column">
		<div id="logf" style="text-align:left;padding:40px 40px"><center>
		 <h1>SIGN IN</h1></center>
    <form id="signupForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
<br><div id="nameError" class="error"></div><br>
        
        <label for="cin">CIN No:</label>
        <input type="text" id="cin" name="cin" required>
<br><div id="cinError" class="error"></div><div id="loginMessage" class="error"></div><div id="notice" style="font-size:1.1rem;padding:2px"></div>
<div style="float:right;height:20%;width:30%">
        <button id = "submitBtn" type="submit" style="font-family:Gagalin;color:white">Submit</button>
    </div><br></form>

        </div>
    </div>
	</div>
	<script>
         document.getElementById('signupForm').addEventListener('submit', async function (e) {
    e.preventDefault();

    // Clear previous messages
		 const loadingEl = document.getElementById('notice');
	let count = 0;
  const baseText = 'Loading';
    document.getElementById('nameError').textContent = '';
    document.getElementById('cinError').textContent = '';
    const messageDiv = document.getElementById('loginMessage');
    const submitBtn = document.getElementById('submitBtn');
    messageDiv.textContent = '';
    messageDiv.className = '';

    const name = document.getElementById('name').value.trim();
    const cin = document.getElementById('cin').value;

    const response = await fetch('https://studyhelp-backend.vercel.app/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ name, cin })
    });

    const msg = await response.text();

    if (response.ok) {
      messageDiv.textContent = msg;
      messageDiv.className = 'success';
      submitBtn.style.display = 'none';
      // Optional: redirect after 2 seconds
	    const interval = setInterval(() => {
    count = (count + 1) % 4;  // cycle through 0 to 3
    loadingEl.textContent = baseText + '.'.repeat(count);
  }, 1000);

      setTimeout(() => {
        window.location.replace("index1.html");;
      }, 3000);
    } else {

      // Optional: Show near specific field
      if (msg.includes('CIN')) {
        document.getElementById('cinError').textContent = msg;
      } else if (msg.includes('Name')) {
        document.getElementById('nameError').textContent = msg;
      }
    }
  });
</script>
<br>
  <footer style="
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: white;
  color: black;
  text-align: center;
  padding: 7px 10px;
  font-family: Gagalin;
  font-size: 0.8rem;
  z-index: 1000;
  box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
">
  üì± If you face any issue, kindly <a href="https://wa.me/918981109323" target="_blank" style="color: #075e54; text-decoration: none; font-weight: bold;">WhatsApp us at 8981109323</a>
</footer>

</body>
</html>

